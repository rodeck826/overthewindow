!function(w){var ConsoleFunction=new function(){var root=this;this.isHook=!1,this.mov={isClick:!1,base:{x:0,y:0},obj:null},this.print=function(e){if(void 0!==e){var t=document.createElement("div");t.innerHTML=e,t.setAttribute("class","line"),u$(".output_wrap")[0].appendChild(t)}},this.branch=function(msg){var root=this;u$.post("/json/message.otw",{msg:msg},function(data){var obj=eval(data);obj.forEach(function(e){root[e.func](e.arg)})})},this.view=function(type){var root=this,url="",fn=null,option={};"contact"===type?(url="/layer/contact.otw",option.height="540px",option.width="500px",option.top=window.innerHeight/2-270+"px",option.left=window.innerWidth/2-250+"px",option.title="Contact",option.id="contactLayer",fn=function(obj){var header=u$(obj).find(".contact_header").find("h1")[0];header.addEventListener("mouseover",function(){header.classList.add("animated"),header.classList.add("rubberBand"),setTimeout(function(){header.classList.remove("animated"),header.classList.remove("rubberBand")},2e3)}),u$(obj)[0].parentNode.style.background="url(/storage/background/skills.jpg) no-repeat center center fixed",u$(obj)[0].parentNode.style["webkit-background-size"]="cover",u$(obj)[0].parentNode.style["-moz-background-size"]="cover",u$(obj)[0].parentNode.style["-o-background-size"]="cover",u$(obj)[0].parentNode.style["background-size"]="cover",u$(obj).find("input,textarea").forEach(function(e){e.addEventListener("focusin",function(){root.isHook=!1}),e.addEventListener("focusout",function(){root.isHook=!0})}),u$(obj).find("input").get(0)[0].focus();var mailSendBtn=u$(obj).find("#mailSend")[0];mailSendBtn.addEventListener("click",function(){var frm=document.getElementById("mailFrm"),data=new FormData(frm),reg=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(""==u$(frm).find("[name=name]")[0].value)return u$(frm).find("[name=name]")[0].focus(),alert("Please Input your name"),!1;if(""==u$(frm).find("[name=email]")[0].value)return u$(frm).find("[name=email]")[0].focus(),alert("Please Input your email"),!1;if(!reg.test(u$(frm).find("[name=email]")[0].value))return u$(frm).find("[name=email]")[0].focus(),alert("Please Check your email"),!1;if(""==u$(frm).find("[name=subject]")[0].value)return u$(frm).find("[name=subject]")[0].focus(),alert("Please Input your subject"),!1;if(""==u$(frm).find("[name=context]")[0].value)return u$(frm).find("[name=context]")[0].focus(),alert("Please Input your messages"),!1;wating.showWatingView();var httpRequest=new XMLHttpRequest;httpRequest.onreadystatechange=function(){if(4==httpRequest.readyState&&200==httpRequest.status){setTimeout(function(){wating.hideWatingView()},500);var d=eval("["+httpRequest.response+"]");d=d[0],"done"==d.result?alert("Thank you for contact me."):"error"==d.result&&alert("Error."),root.closePage()}},httpRequest.open("POST",frm.getAttribute("action")),httpRequest.send(data)})},u$.ajax(url,null,function(e){root.appendPage(e,option,fn)})):"todo"===type?(option.height="540px",option.width="840px",option.top=window.innerHeight/2-270+"px",option.left=window.innerWidth/2-420+"px",option.title="What to do",option.id="todoLayer",url="/layer/todo.otw",fn=function(e){var t=u$(e).find("b.strong")[0];u$(e)[0].parentNode.style.background="url(/storage/background/skills.jpg) no-repeat center center fixed",u$(e)[0].parentNode.style["webkit-background-size"]="cover",u$(e)[0].parentNode.style["-moz-background-size"]="cover",u$(e)[0].parentNode.style["-o-background-size"]="cover",u$(e)[0].parentNode.style["background-size"]="cover",t.addEventListener("mouseover",function(){t.classList.add("animated"),t.classList.add("rubberBand"),setTimeout(function(){t.classList.remove("animated"),t.classList.remove("rubberBand")},2e3)}),t.addEventListener("click",function(){window.location.href="#contact"})},u$.ajax(url,null,function(e){root.appendPage(e,option,fn)})):"work"==type&&(option.height="80%",option.width="80%",option.top=window.innerHeight/2-.8*window.innerHeight/2+"px",option.left=window.innerWidth/2-.8*window.innerWidth/2+"px",option.title="Works",option.id="workLayer",url="/layer/work.otw",fn=function(e){u$(e).find(".btn_page_close")[0];u$(e)[0].parentNode.style.background="url(/storage/background/skills.jpg) no-repeat center center fixed",u$(e)[0].parentNode.style["webkit-background-size"]="cover",u$(e)[0].parentNode.style["-moz-background-size"]="cover",u$(e)[0].parentNode.style["-o-background-size"]="cover",u$(e)[0].parentNode.style["background-size"]="cover",timeline.init(),u$(e).find(".polio").forEach(function(t){t.addEventListener("click",function(n){t.classList.contains("active")||n.defaultPrevented||(u$(e).find(".polio.active")[0].classList.remove("active"),u$(".layer_body").find(".row").get(1)[0].insertBefore(t,u$(".polio").get(0)[0]),t.classList.add("active"),u$(t).find(".thum_img").get(0)[0].style="opacity:1;display:block",u$("#workLayer")[0].scrollTop=0,t)})}),u$(e).find("video")[0].addEventListener("ended",function(){var e=u$(".polio.active").find(".play_btn")[0];e.setAttribute("data-status","stop"),e.children[0].classList.remove("fa-pause-circle-o"),e.children[0].classList.add("fa-play-circle")}),u$(e).find(".prev_btn").forEach(function(e){e.addEventListener("click",function(e){var t=u$(".polio.active").find(".thum_img").get(u$(".polio.active").find(".thum_img").length-1)[0];u$(".polio.active").find(".thumb")[0].insertBefore(t,u$(".polio.active").find(".thum_img").get(0)[0]),u$(t).fadeIn(),u$(".polio.active").find(".thum_img").get(1).fadeOut(),e.preventDefault()})}),u$(e).find(".next_btn").forEach(function(e){e.addEventListener("click",function(e){u$(".polio.active").find(".thum_img").get(0).fadeOut(function(e){u$(".polio.active").find(".thumb")[0].appendChild(e)}),u$(".polio.active").find(".thum_img").get(1).fadeIn(),e.preventDefault()})}),u$(e).find(".play_btn").forEach(function(e){e.addEventListener("click",function(){new videoPlayer(e.nextSibling.nextSibling.getAttribute("src")).show()})}),u$(e).find(".zoom_btn").forEach(function(e){e.addEventListener("click",function(){var t={height:"90%",width:"90%"};t.top=window.innerHeight/2-.9*window.innerHeight/2+"px",t.left=window.innerWidth/2-.9*window.innerWidth/2+"px",t.title="Images Viewer",t.id="imgView";var n="<img src='"+u$(e.parentNode).find("img")[0].src+"' style='width:100%;'/>";root.openLayer(n,t)})}),u$(e).find(".poli_close").forEach(function(e){e.addEventListener("click",function(t){u$(e.parentNode).find("video").length>0&&u$(e.parentNode).find("video")[0].pause(),u$(e.parentNode).find("a.play_btn")[0].setAttribute("data-status","stop"),u$(e.parentNode).find("a.play_btn")[0].children[0].classList.remove("fa-pause-circle-o"),u$(e.parentNode).find("a.play_btn")[0].children[0].classList.add("fa-play-circle"),u$(".polio.active")[0].setAttribute("class","polio"),t.preventDefault()})})},u$.ajax(url,null,function(e){root.appendPage(e,option,fn,function(e){u$(".polio.active").length>0?(u$(".polio.active").find(".thum_img").get(0)[0].style="opacity:0;display:none",u$(".polio.active")[0].setAttribute("class","polio")):u$(".wrap").animate("top",-1*window.innerHeight,0,35,function(){u$("#"+option.id)[0].parentNode.style.background="rgba(255,255,255,0)",u$("#"+option.id)[0].parentNode.style.display="none",u$("#"+option.id)[0].remove(),root.removeHash(),root.closePageEvent(),root.closePageEvent=function(){console.log("clear!")}})})}))},this.clear=function(){return new u$.promise(function(e){u$(".output_wrap")[0].innerHTML="",root.print("- SYSTEM : console clear done!"),root.scrollUp(),e()})},this.scrollUp=function(){var e=.85*window.innerHeight,t=u$(".input_wrap")[0].offsetTop-e;u$(".console_container")[0].style.top.replace("px","");t*=-1,u$(".console_container")[0].style.top=t<0?t+"px":"0px"},this.closePageEvent=function(){},this.closePage=function(){var e=null,t=u$(".page_wrap")[0],n=u$(t).find(".btn_page_close")[0];document.createEventObject?(e=document.createEventObject(),n.fireEvent("click",e),n.dispatchEvent(e)):((e=document.createEvent("Events")).initEvent("click",!0,!0),n.dispatchEvent(e))},this.appendPage=function(e,t,n,i){var o=["top","right","left","bottom"],a=this,r=document.createElement("div"),s=document.createElement("div"),u=document.createElement("a");void 0!==i&&"function"==typeof i||(i=function(e){u$(".wrap").animate("top",-1*window.innerHeight,0,35,function(){u$("#"+t.id)[0].parentNode.style.background="rgba(255,255,255,0)",u$("#"+t.id)[0].parentNode.style.display="none",u$("#"+t.id)[0].remove(),a.removeHash(),a.closePageEvent(),a.closePageEvent=function(){console.log("clear!")}})}),r.style.background="rgba(0,0,0,0.75)",r.style.width="100%",r.style.height="100%",r.setAttribute("id",t.id),r.style["overflow-y"]="auto",r.style["overflow-x"]="hidden",u.setAttribute("href","javascript:;"),u.innerHTML="<img src='/statics/images/btn_close_white.png'/>",u.setAttribute("class","btn_page_close"),u.addEventListener("click",i),s.innerHTML=e,r.appendChild(u),r.appendChild(s),u$(".page_wrap")[0].appendChild(r),u$(".page_wrap")[0].style.display="block",n(r);var d=Math.floor(4*Math.random());"top"==o[d]?u$(".wrap").animate("top",0,-window.innerHeight,30):"right"==o[d]?u$(".wrap").animate("right",0,window.innerWidth,30):"left"==o[d]?u$(".wrap").animate("left",0,-window.innerWidth,30):"bottom"==o[d]&&u$(".wrap").animate("bottom",0,window.innerHeight,30)},this.openLayer=function(e,t,n){u$("#"+t.id).length>0&&u$("#"+t.id)[0].remove();var i=this,o=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div");r.innerHTML=e,r.setAttribute("class","open_layer_context"),r.style["overflow-y"]="auto",r.style["overflow-x"]="hidden",r.style.width="100%",r.style.height="calc(100% - 40px)";var s=document.createElement("div"),u=document.createElement("a"),d=document.createElement("a");u.setAttribute("class","close_btn"),u.innerHTML='<i class="fa fa-window-close fa-lg" aria-hidden="true"></i>',u.addEventListener("click",function(){o.remove()}),d.setAttribute("class","hide_btn"),d.innerHTML='<i class="fa fa-minus-square fa-lg" aria-hidden="true"></i>',d.addEventListener("click",function(){"40px"!=o.style.height?(o.style.height="40px",u$(d).find("i")[0].classList.remove("fa-minus-square-o"),u$(d).find("i")[0].classList.add("fa-plus-square-o")):(o.style.height=t.height,u$(d).find("i")[0].classList.add("fa-minus-square-o"),u$(d).find("i")[0].classList.remove("fa-plus-square-o"))}),s.innerHTML=t.title,s.setAttribute("class","cst_tit"),a.appendChild(s),a.appendChild(d),a.appendChild(u),a.setAttribute("class","title"),a.addEventListener("mousedown",function(e){i.mov.base.x=e.screenX,i.mov.base.y=e.screenY,i.mov.isClick=!0,i.mov.obj=o}),a.addEventListener("mouseup",function(){i.mov.base.x=0,i.mov.base.y=0,i.mov.obj=null,i.mov.isClick=!1}),document.body.addEventListener("mousemove",function(e){if(i.mov.isClick){var t=i.mov.base.x-e.screenX,n=i.mov.base.y-e.screenY,o=i.mov.obj.style.left.replace("px",""),a=i.mov.obj.style.top.replace("px","");i.mov.base.x=e.screenX,i.mov.base.y=e.screenY,i.mov.obj.style.left=Number(o)-t+"px",i.mov.obj.style.top=Number(a)-n+"px"}}),o.style.opacity="0",o.setAttribute("class","open_layer"),o.style.top=t.top,o.style.left=t.left,o.style.width=t.width,o.style.height=t.height,o.setAttribute("id",t.id),o.appendChild(a),o.appendChild(r),u$("body")[0].appendChild(o),u$(o).fadeIn(),"function"==typeof n&&n(o)},this.append=function(e,t){var n=document.createElement("div");n.innerHTML=e,n.style.opacity="0",u$(".output_wrap")[0].appendChild(n);var i=u$(".input_wrap")[0].offsetTop-.85*window.innerHeight,o=u$(".console_container")[0].style.top.replace("px","");i+=Number(o),(i*=-1)<0?function e(t,n,i,o){t<21&&(u$(".console_container")[0].style.top=Number(i)+n*t+"px",o.style.opacity=.05*t,t+=1,setTimeout(function(){e(t,n,i,o)},50))}(1,i/20,o,n):u$(n).fadeIn(),t(n)},this.removeHash=function(){history.pushState("",document.title,window.location.pathname)},this.call=function(e,t){this[e](t)}};w.ConsoleFunction=ConsoleFunction}(window);